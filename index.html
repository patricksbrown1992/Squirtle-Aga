<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="./css/reset.css" />
    <link rel="stylesheet" href="./css/main.css" />
    <script src="./lib/bundle.js"></script>
    <title>Squirtle-Aga</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        canvas {
            background: #eee;
            /* change to pokemon battle background */
        
            display: block;
           
            margin: 0 auto;
        }
    </style>
    <script src="js/squirtleBullet.js"></script>
  
    <script src="js/enemyBullet.js"></script>
    <script src="js/Instructions.js"></script>
    <script src="js/winningModal.js"></script>
    <script src="js/losingModal.js"></script>
    <script src="js/score.js"></script>
    <script src="js/beedrill.js"></script>
    <script src="js/dragonite.js"></script>
    <script src="js/butterfree.js"></script>
    <script src="js/game.js"></script>
</head>

<body>
    
    <div class="header">
     
        <img src="./assets/squirtle.png">
        <h1><img src="./assets//Squirtle-aga-font.png"></h1>
        <img src="./assets/beedrill.png">
        <img src="./assets/butterfree.png">
        <img src="./assets/dragonite.png">
        <!-- <img src="./assets/squirtle.png"></img>
        <img src="./assets/butterfree.png"></img>
        <img src="./assets/beedrill.png"></img>
        <img src="./assets/dragonite.png"></img> -->
    </div>

    <div class="squirtle-aga-body">

        <div class="instructions-nav">
            <h3> <img src="./assets/press-left.png"> </h3>
            <h3><img src="./assets/press-right.png"></h3>
            <h3> <img src="./assets/press-space.png"> </h3>
            <h3> <img src="./assets/avoid-fire.png"> </h3>
            <h3> <img src="./assets/eliminate.png"> </h3>
        
        </div>
    
    
        <div class='canvas'>
    
            <canvas id="myCanvas" width="480" height="500"></canvas>
    
            <script>
                // need to realign these with bigger canvas
                var canvas = document.getElementById("myCanvas");
                var ctx = canvas.getContext("2d");
                var squirtleWidth = 24;
                var squirtleHeight = 31;
                var squirtleX = (canvas.width - squirtleWidth) / 2;
                var dragoniteHeight = 31;
                var dragoniteWidth = 24;
                var dragonitePadding = 40;
                var dragoniteRowCount = 1;
                var dragoniteColumnCount = 4;
                var dragoniteOffsetLeft = 170;
                var butterfreeWidth = 21;
                var butterfreeHeight = 17;
                var butterfreePadding = 20;
                var butterfreeRowCount = 2;
                var butterfreeColumnCount = 8;
                var butterfreeOffsetTop = 50;
                var butterfreeOffsetLeft = 138;
                var beedrillOffsetLeft = 140;
                var beedrillOffsetTop = 100
                var beedrillHeight = 22;
                var beedrillWidth = 20;
                var beedrillPadding = 20;
                var beedrillRowCount = 2;
                var beedrillColumnCount = 8;
                var score = 0;
                var lives = 3;
                var rightPressed = false;
                var leftPressed = false;
                var spacePressed = false;
                var bullets = [];
                // var score = new Score();
    
    
                var butterfrees = [];
                for (var c = 0; c < butterfreeColumnCount; c++) {
                    butterfrees[c] = [];
                    for (var r = 0; r < butterfreeRowCount; r++) {
                        butterfrees[c][r] = { x: 0, y: 0 };
                    }
                }
    
    
                var beedrills = [];
                for (var c = 0; c < beedrillColumnCount; c++) {
                    beedrills[c] = [];
                    for (var r = 0; r < beedrillRowCount; r++) {
                        beedrills[c][r] = { x: 0, y: 0 };
                    }
                }
    
                var dragonites = [];
                for (var c = 0; c < dragoniteColumnCount; c++) {
                    dragonites[c] = [];
                    for (var r = 0; r < dragoniteRowCount; r++) {
                        dragonites[c][r] = { x: 0, y: 0 };
                    }
                }
    
                function collision(start, end){
                    if ((start.y + start.height) < end.y ||
                    start.y > (end.y + end.height) ||
                    (start.x + start.width) < end.x ||
                    start.x > (end.x + end.width)){
                        return false;
                    } else {
                        return true;
                    }
                    
                }
            
                function addBullet(){
                   if(spacePressed){
                       var newBullet = new SquirtleBullet(squirtleX, 450, 2)
                       bullets.push(newBullet)
                    }
                }

                function drawBullet(bullets){
                    // debugger
                    for(let i = 0; i < bullets.length; i++){
                        let bullet = bullets[i]
                        if (bullet.x > 0 && bullet.x + 20 < 480 && bullet.y > 0 && bullet.y + 30 < 500){
                            ctx.beginPath();
                            ctx.rect(bullet.x, bullet.y, 15, 30);
                            ctx.fillStyle = "black";
                            ctx.fill();
                            ctx.closePath();
                        }
                    }
                }
    
                
    
                document.addEventListener("keydown", keyDownHandler, false);
                document.addEventListener("keyup", keyUpHandler, false);
    
                function keyDownHandler(e) {
                    // debugger
                    if (e.keyCode === 39) {
                        // debugger
                        rightPressed = true;
                    }
                    else if (e.keyCode === 37) {
                        // debugger
                        leftPressed = true;
                    }
                    else if (e.keyCode === 32){
                        // debugger
                        spacePressed = true;
                    }
                }

                function updateBullets(bullets){
                    for(let i = 0; i < bullets.length; i++){
                        bullet = bullets[i];
                        bullet.y -= bullet.speed * bullet.dy;
                    }
                }
    
                function keyUpHandler(e) {
                    if (e.keyCode === 39) {
                        // debugger
                        rightPressed = false;
                        // debugger
                    }
                    else if (e.keyCode === 37) {
                        // debugger
                        leftPressed = false;
                    }
                    else if (e.keyCode === 32) {
                        // debugger
                        spacePressed = false;
                    }
                }
    
                function shoot(){
                
                    if(spacePressed){
                        addBullet();
                    }
                }
    
                function drawButterfrees() {
                    for (var c = 0; c < butterfreeColumnCount; c++) {
                        for (var r = 0; r < beedrillRowCount; r++) {
                        var butterfreeX = (c * (butterfreeWidth + butterfreePadding)) + butterfreeOffsetLeft;
                        var butterfreeY = (r * (butterfreeHeight + butterfreePadding)) + butterfreeOffsetTop;
                        butterfrees[c][r].x = butterfreeX;
                        butterfrees[c][r].y = butterfreeY;
                        ctx.beginPath();
                        ctx.rect(butterfreeX, butterfreeY, butterfreeWidth, butterfreeHeight);
                        ctx.fillStyle = "#0095DD";
                        ctx.fill();
                        ctx.closePath();
                        }
                    }
                }
    
                function drawBeedrills() {
                    for (var c = 0; c < butterfreeColumnCount; c++) {
                        for (var r = 0; r < butterfreeRowCount; r++) {
                            var beedrillX = (c * (beedrillWidth + beedrillPadding)) + beedrillOffsetLeft;
                            var beedrillY = (r * (beedrillHeight + beedrillPadding)) + beedrillOffsetTop;
                            beedrills[c][r].x = beedrillX;
                            beedrills[c][r].y = beedrillY;
                            ctx.beginPath();
                            ctx.rect(beedrillX, beedrillY, beedrillWidth, beedrillHeight);
                            ctx.fillStyle = "green";
                            ctx.fill();
                            ctx.closePath();
                        }
                    }
                }
    
                function drawDragonites() {
                    for (var c = 0; c < dragoniteColumnCount; c++) {
                        for (var r = 0; r < dragoniteRowCount; r++) {
                            var dragoniteX = (c * (dragoniteWidth + dragonitePadding)) + dragoniteOffsetLeft;
                            var dragoniteY = (r * (dragoniteHeight + dragonitePadding));
                            dragonites[c][r].x = dragoniteX;
                            dragonites[c][r].y = dragoniteY;
                            ctx.beginPath();
                            ctx.rect(dragoniteX, dragoniteY, dragoniteWidth, dragoniteHeight);
                            ctx.fillStyle = "red";
                            ctx.fill();
                            ctx.closePath();
                        }
                    }
                }
    
                function drawSquirtle(){
                    ctx.beginPath();
                    ctx.rect(squirtleX, canvas.height - squirtleHeight, squirtleWidth, squirtleHeight);
                        
                    ctx.fillStyle = "#0095DD";
                    ctx.fill();
                    ctx.closePath()
                }
    
                function draw(){
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    drawSquirtle()
                    drawButterfrees()
                    drawBeedrills()
                    drawDragonites()
                    drawBullet(bullets)
                    
    
                    if(rightPressed && squirtleX < canvas.width-squirtleWidth){
                        squirtleX += 5;
                    } 
                    else if(leftPressed && squirtleX > 0){
                        squirtleX -= 5;
                    } 
                    else if (spacePressed){
                        shoot();
                        // squirtleX -= 5;
                    }
                }
                setInterval(draw, 20);
                
               
                
            </script>
        </div>
    
        <div class="score-nav">

            <script>
                var score = new Score();
            </script>
            <h3> <img src="./assets/score.png"></h3>
           
            <h3> <img src="./assets/high-score.png"> </h3>
            20000
            <h3> <a href="https://www.linkedin.com/in/patrick-brown-ab4407142"><img class="linkedin-logo" src="./assets//LinkedIn_logo.png">  Patrick's LinkedIn</a></h3>
           <h3><a href="https://github.com/patricksbrown1992/Squirtle-Aga"> <img class='github-logo'src="./assets/github-logo.png">  Patrick's Github</a></h3>
        </div>
    </div>

</body>

</html>